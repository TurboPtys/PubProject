@model PubProjectApi.Models.ModelsView.Advert.AdvertsListView
@{
    ViewData["Title"] = "Index";
}
@using Microsoft.AspNetCore.Identity
@using PubProjectApi.Models
@inject UserManager<AppUser> UserManager

<div class="board-menu">
    <div class="row">
        <div class="col-xs-3 left-menue">
            @Html.Partial("_LeftAdvertSearchMenu")

        </div>
        <div class="col-xs-8 col-ls-offset-1">
            <div class="row row-flex">

                @foreach (var adv in Model.Adverts)
                {
                    <div class="card form-group col">
                        <div class="form-group row card-header">
                            <div class="form-group col-sm-8">
                                <div class="row-sm-8 venue-name">@adv.GastronomicVenue.GastronomicVenueName</div>
                                <div class="row-sm-8 venue-location">@adv.GastronomicVenue.City</div>
                                <div class="row-sm-8">@adv.Advertisement.EventDate.ToString().Substring(0,10)</div>
                            </div>

                            <div class="col-sm-4 advertise-rating" align="right">
                                @*<a href="/Advert/AddLike/@UserManager.GetUserId(User)/@adv.Advertisement.AdvertisementId">*@
                                <img src="~/images/flame.png" width="25" />
                                @if((adv.Likes.Where(x => x.UserId.Equals(new Guid(@UserManager.GetUserId(User)))).FirstOrDefault()) == null)
                                {

                                    @Html.ActionLink("Advert", "AddLike", new { UserId = @UserManager.GetUserId(User), AdvertId = @adv.Advertisement.AdvertisementId })

                                }

                                @*</a>*@
                                @adv.CountLikes
                            </div>
                        </div>
                        <div class="col-lg-12 img-box">
                            <img class="img-responsive" src="~/images/oo.png" alt="Card image cap">
                            <div class="img-responsive-overlay">
                                <div class="img-responsive-overlay-text">@adv.Advertisement.Description</div>
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title col-lg-12 advertise-title" align="center">@adv.Advertisement.Title</h5>
                            @*<p class="card-text col-lg-12">Some quick example text to build on the card title and make up the bulk of the card's content.</p>*@
                            @*<a href="#" class="btn btn-primary">Go somewhere</a>*@
                        </div>
                    </div>
                }

            </div>
        </div>
    </div>



</div>
